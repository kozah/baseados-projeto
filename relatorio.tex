\documentclass[11pt, a4paper]{article}
\usepackage[left=2cm, right=2cm, top=2cm]{geometry}
\usepackage[portuguese]{babel}
\usepackage{array}
\usepackage{amsmath}
\usepackage{enumerate}
\usepackage{amsfonts}

\begin{document}
\title{MAC0444 - Sistemas Baseados em Conhecimento \\ \large{Relatório do Projeto}}

\author{Lincoln Yuji de Oliveira - NUSP: 11795439\\
    Marcos Henrique Castello - NUSP: 11443210\\
    Mateus Santos Freire - NUSP: 11796889 \\
    Natália Hitomi Koza - NUSP: 10698432}
\maketitle

\section*{Ontologia}

Somente referenciamos a ontologia FOAF.

\subsection*{Conceitos}

\vspace{0.5cm}
\begin{center}
\begin{tabular}{cl}
    Conceitos & Descrição\\
    \hline
    Filme &
        \begin{tabular}{l}
            subconceito de \verb|foaf:Project|
        \end{tabular}\\
    \hline
    Ator &
        \begin{tabular}{l}
            subconceito de \verb|foaf:Person|
        \end{tabular}\\
    \hline
    Diretor &
        \begin{tabular}{l}
            subconceito de \verb|foaf:Person|
        \end{tabular}\\
    \hline
    Personagem &
        \begin{tabular}{l}
            subconceito de \verb|foaf:Project|
        \end{tabular}\\
    \hline
    Homem &
        \begin{tabular}{l}
            subconceito de \verb|foaf:Agent|
        \end{tabular}\\
    \hline
    Mulher &
        \begin{tabular}{l}
            subconceito de \verb|foaf:Agent|
        \end{tabular}\\
    \hline
\end{tabular}
\end{center}

\subsection*{Propriedades}

\vspace{0.5cm}
\begin{center}
\begin{tabular}{cl}
    Propriedade & Descrição\\
    \hline
    atuaEm &
        \begin{tabular}{l}
            Indica que o Ator atua no Filme\\
            subpropriedade de \verb|foaf:made|\\
            inversa de atuadoPor\\
            propriedade assimétrica\\
            domínio: Ator\\
            range: Filme
        \end{tabular}\\
    \hline
    atuadoPor &
        \begin{tabular}{l}
            Indica que o Filme é atuado pelo Ator\\
            subpropriedade de \verb|foaf:maker|
        \end{tabular}\\
    \hline
    dirige &
        \begin{tabular}{l}
            Indica que o Diretor dirige o Filme\\
            subpropriedade de \verb|foaf:made|\\
            inversa de dirigidoPor\\
            domínio: Diretor\\
            range: Filme
        \end{tabular}\\
    \hline
    dirigidoPor &
        \begin{tabular}{l}
            Indica que o Filme é dirigido pelo Diretor\\
            subpropriedade de \verb|foaf:maker|
        \end{tabular}\\
    \hline
    interpreta &
        \begin{tabular}{l}
            Indica que o Ator interpreta o Personagem\\
            subpropriedade de \verb|foaf:made|\\
            inversa de interpretadoPor\\
            domínio: Ator\\
            range: Personagem
        \end{tabular}\\
    \hline
    interpretadoPor &
        \begin{tabular}{l}
            Indica que o Personagem é interpretado pelo Ator\\
            subpropriedade de \verb|foaf:maker|
        \end{tabular}\\
    \hline
    temAnoDeLancamento &
        \begin{tabular}{l}
            Indica que o Filme tem como ano de lançamento esse número inteiro\\
            tipo: owl:FunctionalProperty\\
            domínio: Filme\\
            range: inteiro
        \end{tabular}\\
    \hline
    temDuracao &
        \begin{tabular}{l}
            Indica que o Filme tem como duração esse número inteiro de minutos\\
        domínio: Filme\\
        range: inteiro
        \end{tabular}\\
    \hline
    temPrimeiroNome &
        \begin{tabular}{l}
            Indica que a Pessoa tem como primeiro nome essa string\\
            subpropriedade de \verb|foaf:firstName|\\
            tipo: owl:FunctionalProperty\\
            domínio: \verb|foaf:Person|\\
            range: string
        \end{tabular}\\
    \hline
    temSobrenome &
        \begin{tabular}{l}
            Indica que a Pessoa tem como sobrenome essa string\\
            subpropriedade de \verb|foaf:familyName|\\
            tipo: owl:FunctionalProperty\\
            domínio: \verb|foaf:Person|\\
            range: string
        \end{tabular}\\
    \hline
    temTitulo &
        \begin{tabular}{l}
            Indica que o Filme tem como título essa string\\
            domínio: Filme\\
            range: string
        \end{tabular}\\
    \hline
\end{tabular}
\end{center}

\newpage
\subsection*{Instâncias}

Dada a planilha de dados para popular as classes, os indivíduos estão mapeados da seguinte forma:

\begin{itemize}
    \item filmes
    \begin{center}
        \begin{tabular}{|cccc|}
            \hline
            A & B & C & D	\\
            \hline
            filme & Ano	& Título & Duração	\\
            american\_beauty & 1999 & American Beauty & 122	\\
            anna & 1987 & Anna & 100	\\
            \vdots & \vdots & \vdots & \vdots\\
            \hline
        \end{tabular}
    \end{center}
        Possuem tipo Filme, são identificados pela coluna A prefixado com \verb|filme\_|, tem como ano de lançamento a coluna B, possuem a coluna C como título e tem duração D.
    \item diretores
    \begin{center}
        \begin{tabular}{|cccc|}
            \hline
            A & B & C & D\\
            \hline
            diretor	& filme & nome & sobrenome\\
            sam\_mendes & american\_beauty & Sam	& Mendes\\
            yurek\_bogayevicz & anna	& Yurek	& Bogayevicz            \\
            \vdots & \vdots & \vdots & \vdots\\
            \hline
        \end{tabular}
    \end{center}
    São do tipo Diretor, são identificados pela coluna A, dirigem o filme da coluna B, tem primeiro nome C e sobrenome D.
    \item atrizes
    \begin{center}
        \begin{tabular}{|cccccc|}
            \hline
            A & B & C & D & E & F\\
            \hline
            atriz&filme&personagem&nome&sobrenome&id\\
            annette\_bening&american\_beauty&carolyn\_burnham&Annette&	Bening	&annette\_ \dots \_burnham\\
            thora\_birch&	american\_beauty	&jane\_burnham&	Thora&	Birch&	thora\_b \dots \_burnham	\\
            \vdots & \vdots & \vdots & \vdots & \vdots & \vdots\\
            \hline
        \end{tabular}
    \end{center}
    Indivíduos dos tipos Mulher e Ator, identificado pela coluna A, atua no filme B com o personagem C, possui primeiro nome D e sobrenome E.
    \item atores
    \begin{center}
        \begin{tabular}{|cccccc|}
            \hline
            A & B & C & D & E & F\\
            \hline
            ator & filme & personagem & nome & sobrenome & id\\
            kevin\_spacey & american\_beauty & lester\_burnham	& Kevin & Spacey &kevin\_space\dots ster\_burnham\\
            wes\_bentley & american\_beauty & ricky\_fitts & Wes &Bentley & wes\_bentleyam\dots yricky\_fitts\\
            \vdots & \vdots & \vdots & \vdots & \vdots & \vdots\\
    \hline
        \end{tabular}
    \end{center}
    São dos tipos Ator e Homem, identificado pela coluna A, atua no filme B com o personagem C, possui primeiro nome D e sobrenome E.
\end{itemize}

\newpage
\section*{Consultas}

Para todas as consultas os prefixos são:

\begin{verbatim}
PREFIX  rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
PREFIX  owl: <http://www.w3.org/2002/07/owl#>
PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
PREFIX  xsd: <http://www.w3.org/2001/XMLSchema#>
PREFIX foaf: <http://xmlns.com/foaf/0.1/>
PREFIX onto: <http://www.semanticweb.org/lincolnyuji/ontologies/2021/10/cinema-ontology#>
\end{verbatim}

\subsection*{Query 1}
Quais os \underline{títulos} dos filmes que foram dirigidos pelo diretor \textbf{D}, em ordem lexicográfica?\\

\noindent Para \textbf{D} = \verb|onto:ethan_coen|:
\begin{verbatim}
SELECT ?TituloDoFilme
WHERE
{
  BIND (onto:ethan_coen AS ?D)
  ?filme rdf:type onto:Filme.
  ?D rdf:type onto:Diretor.
  ?D onto:dirige ?filme.
  ?filme onto:temTitulo ?TituloDoFilme.
}
ORDER BY ?TituloDoFilme
\end{verbatim}
\begin{center}
\begin{tabular}{|l|}
    \hline
    TituloDoFilme\\
    \hline
    "Barton Fink"\\
    "Blood Simple"\\
    "Fargo"\\
    "Intolerable Cruelty"\\
    "Miller's Crossing"\\
    "O Brother, Where Art Thou?"\\
    "Paris, je t'aime"\\
    "Raising Arizona"\\
    "The Hudsucker Proxy"\\
    "The Ladykillers"\\
    "The Man Who Wasn't There"\\
    \hline
\end{tabular}
\end{center}

\subsection*{Query 2}
Quais os \underline{primeiros nomes} e \underline{últimos nomes} dos atores que participaram do filme de título \textbf{F\textsubscript{t}}, em ordem lexicográfica de nome e sobrenome, com seus respectivos \underline{personagens}?\\

\noindent Para \textbf{F\textsubscript{t}} = \verb|"American Beauty"|:
\begin{verbatim}
SELECT ?PrimeiroNome ?UltimoNome ?Personagem
WHERE
{
  BIND ("American Beauty" AS ?Ft)
  ?filme rdf:type onto:Filme.
  ?ator rdf:type onto:Ator.
  ?filme onto:temTitulo ?Ft.
  ?ator onto:atuaEm ?filme.
  ?ator onto:temPrimeiroNome ?PrimeiroNome.
  ?ator onto:temSobrenome ?UltimoNome.
  ?ator onto:interpreta ?Personagem.
}
ORDER BY ?PrimeiroNome ?UltimoNome
\end{verbatim}

\begin{center}
    \begin{tabular}{|l|l|l|}
        \hline
        PrimeiroNome & UltimoNome & Personagem \\
        \hline
        "Alison"   & "Faulk"   & personagem\_spartanette\_1   \\
        "Allison"   & "Janney"   & personagem\_barbara\_fitts   \\
        "Amber"   & "Smith"   & personagem\_christy\_kane   \\
        "Annette"   & "Bening"   & personagem\_carolyn\_burnham   \\
        "Ara"   & "Celi"   & personagem\_sale\_house\_woman\_1   \\
        "Barry"   & "Sherman"   & personagem\_brad\_dupree   \\
        "Brenda"   & "Wehle"   & personagem\_sale\_house\_woman\_4   \\
        "Carolina"   & "Lancaster"   & personagem\_spartanette\_4   \\
        "Chekeshka"   & "Putten"   & personagem\_spartanette\_6   \\
        "Chelsea"   & "Hertford"   & personagem\_playground\_girl\_2   \\
        "Chris"   & "Cooper"   & personagem\_col\_frank\_fitts\_usmc   \\
        "Chris"   & "Cooper"   & personagem\_frank\_booker   \\
        "Dennis"   & "Anderson"   & personagem\_mr\_smiley\_s\_manager   \\
        "Elaine"   & "Kendall"   & personagem\_newscaster   \\
        "Emily"   & "Zachary"   & personagem\_spartanette\_7   \\
        "Erin"   & "Strubbe"   & personagem\_young\_jane\_burnham   \\
        "Fort"   & "Atkinson"   & personagem\_sale\_house\_man\_2   \\
        "Heather"   & "Sher"   & personagem\_playground\_girl\_1   \\
        "Joel"   & "McCrary"   & personagem\_catering\_boss   \\
        "John"   & "Cho"   & personagem\_petey   \\
        "John"   & "Cho"   & personagem\_sale\_house\_man\_1   \\
        "Kent"   & "Faulcon"   & personagem\_sale\_house\_man\_3   \\
        "Kevin"   & "Spacey"   & personagem\_lester\_burnham   \\
        "Kevin"   & "Spacey"   & personagem\_roger\_verbal\_kint   \\
        "Krista"   & "Goodsitt"   & personagem\_spartanette\_2   \\
        "Lily"   & "Houtkin"   & personagem\_spartanette\_3   \\
        "Lisa"   & "Cloud"   & personagem\_sale\_house\_woman\_5   \\
        "Marissa"   & "Winokur"   & personagem\_mr\_smiley\_s\_counter\_girl   \\
        "Matthew"   & "Kimbrough"   & personagem\_firing\_range\_attendant   \\
        "Mena"   & "Suvari"   & personagem\_angela\_hayes   \\
        "Nancy"   & "Anderson"   & personagem\_spartanette\_8   \\
        "Peter"   & "Gallagher"   & personagem\_buddy\_kane   \\
        "Peter"   & "Gallagher"   & personagem\_vic\_tenetta\_party\_singer   \\
        "Reshma"   & "Gajjar"   & personagem\_spartanette\_9   \\
        "Romana"   & "Leah"   & personagem\_spartanette\_5   \\
        "Sam"   & "Robards"   & personagem\_jim\_berkley   \\
        "Scott"   & "Bakula"   & personagem\_jim\_olmeyer   \\
        "Stephanie"   & "Rizzo"   & personagem\_spartanette\_10   \\
        "Sue"   & "Casey"   & personagem\_sale\_house\_woman\_2   \\
        "Thora"   & "Birch"   & personagem\_enid   \\
        "Thora"   & "Birch"   & personagem\_jane\_burnham   \\
        "Wes"   & "Bentley"   & personagem\_ricky\_fitts   \\
        \hline
    \end{tabular}
\end{center}

\subsection*{Query 3}
Em quais \underline{filmes} os atores \textbf{X} e \textbf{Y} atuaram juntos, com os respectivos \underline{diretores} e \underline{anos} de lançamento, do mais novo para o mais antigo?\\

\noindent Para \textbf{X} = \verb|onto:ben_gazzara| e \textbf{Y} = \verb|onto:steve_buscemi|:

\begin{verbatim}
SELECT ?Filme ?Diretor ?Ano
WHERE
{
  BIND (onto:ben_gazzara AS ?X)
  BIND (onto:steve_buscemi AS ?Y)
  ?X rdf:type onto:Ator.
  ?Y rdf:type onto:Ator.
  ?Diretor rdf:type onto:Diretor.
  ?Filme rdf:type onto:Filme.
  ?X onto:atuaEm ?Filme.
  ?Y onto:atuaEm ?Filme.
  FILTER (?X != ?Y).
  ?Diretor onto:dirige ?Filme.
  ?Filme onto:temAnoDeLancamento ?Ano.
}
ORDER BY DESC(?Ano)
\end{verbatim}

\begin{center}
    \begin{tabular}{|l|l|l|}
        \hline
        Filme & Diretor & Ano \\
        \hline
        filme\_paris\_je\_t\_aime   & alexander\_payne   & 2006   \\
        filme\_paris\_je\_t\_aime   & alfonso\_cuar\_n   & 2006   \\
        filme\_paris\_je\_t\_aime   & anne\_marie\_mi\_ville   & 2006   \\
        filme\_paris\_je\_t\_aime   & christoffer\_boe   & 2006   \\
        filme\_paris\_je\_t\_aime   & daniela\_thomas   & 2006   \\
        filme\_paris\_je\_t\_aime   & ethan\_coen   & 2006   \\
        filme\_paris\_je\_t\_aime   & ettore\_scola   & 2006   \\
        filme\_paris\_je\_t\_aime   & fr\_d\_ric\_auburtin   & 2006   \\
        filme\_paris\_je\_t\_aime   & g\_rard\_depardieu   & 2006   \\
        filme\_paris\_je\_t\_aime   & gus\_van\_sant   & 2006   \\
        filme\_paris\_je\_t\_aime   & isabel\_coixet   & 2006   \\
        filme\_paris\_je\_t\_aime   & jean\_luc\_godard   & 2006   \\
        filme\_paris\_je\_t\_aime   & joel\_coen   & 2006   \\
        filme\_paris\_je\_t\_aime   & nobuhiro\_suwa   & 2006   \\
        filme\_paris\_je\_t\_aime   & oliver\_schmitz   & 2006   \\
        filme\_paris\_je\_t\_aime   & olivier\_assayas   & 2006   \\
        filme\_paris\_je\_t\_aime   & richard\_lagravenese   & 2006   \\
        filme\_paris\_je\_t\_aime   & sylvain\_chomet   & 2006   \\
        filme\_paris\_je\_t\_aime   & tom\_tykwer   & 2006   \\
        filme\_paris\_je\_t\_aime   & vincenzo\_natali   & 2006   \\
        filme\_paris\_je\_t\_aime   & walter\_salles   & 2006   \\
        filme\_the\_big\_lebowski   & joel\_coen   & 1998   \\
        \hline
    \end{tabular}
\end{center}

\subsection*{Query 4}
Quais \underline{filmes} do diretor do filme \textbf{F} possuem \textbf{X} ou \textbf{Y} como atores, com as respectivas \underline{durações} em ordem crescente?\\

\noindent Para \textbf{F} = \verb|onto:filme_her|, \textbf{X} = \verb|onto:amy_addams| e \textbf{Y} = \verb|onto:tim_szczepanski|:

\begin{verbatim}
SELECT ?Filme ?Duracao
WHERE
{
  BIND (onto:filme_her AS ?F)
  BIND (onto:amy_addams AS ?X)
  BIND (onto:tim_szczepanski AS ?Y)
  ?Diretor rdf:type onto:Diretor.
  ?Filme rdf:type onto:Filme.
  ?F rdf:type onto:Filme.
  ?X rdf:type onto:Ator.
  ?Y rdf:type onto:Ator.
  ?Diretor onto:dirige ?F.
  ?Filme onto:dirigidoPor ?Diretor.
  {?X onto:atuaEm ?Filme} UNION {?Y onto:atuaEm ?Filme}.
  ?Filme onto:temDuracao ?Duracao.
}
ORDER BY ?Duracao
\end{verbatim}

\begin{center}
\begin{tabular}{|l|l|}
    \hline
    Filme & Duracao\\
    \hline
    filme\_torrance\_rises & 34\\
    filme\_her & 126 \\
    \hline
\end{tabular}
\end{center}

\subsection*{Query 5}
Quais \underline{pessoas} atuaram em um \underline{filme} e dirigiram algum \underline{filme} (não necessariamente o mesmo filme, mas obrigatoriamente a mesma pessoa)?

\begin{verbatim}
SELECT DISTINCT ?Pessoa (SAMPLE(?filme1) AS ?FilmeAt) (SAMPLE(?filme2) AS ?FilmeDir)
WHERE
{
  ?Pessoa rdf:type foaf:Person.
  ?filme1 rdf:type onto:Filme.
  ?filme2 rdf:type onto:Filme.
  ?Pessoa onto:atuaEm ?filme1.
  ?filme2 onto:dirigidoPor ?Pessoa.
}
GROUP BY ?Pessoa
\end{verbatim}

\begin{center}
    \begin{tabular}{|l|l|l|}
        \hline
        Pessoa & FilmeAt & FilmeDir \\
        \hline
        harold\_ramis   & filme\_ghostbusters   & filme\_groundhog\_day   \\
        eleanor\_coppola   & filme\_hearts\_of\_darkness\_a\_filmmaker\_s\_apocalypse   & filme\_hearts\_of\_darkness\_a\_filmmaker\_s\_apocalypse   \\
        woody\_allen   & filme\_scoop   & filme\_scoop   \\
        george\_lucas   & filme\_hearts\_of\_darkness\_a\_filmmaker\_s\_apocalypse   & filme\_star\_wars\_episode\_i\_\_the\_phantom\_menace   \\
        ivan\_reitman   & filme\_ghostbusters   & filme\_ghostbusters   \\
        ethan\_coen   & filme\_down\_from\_the\_mountain   & filme\_raising\_arizona   \\
        roman\_coppola   & filme\_star\_wars\_episode\_i\_\_the\_phantom\_menace   & filme\_cq   \\
        denzel\_washington   & filme\_the\_great\_debaters   & filme\_the\_great\_debaters   \\
        va\_g\_rdos   & filme\_an\_american\_rhapsody   & filme\_an\_american\_rhapsody   \\
        g\_rard\_depardieu   & filme\_cq   & filme\_paris\_je\_t\_aime   \\
        sofia\_coppola   & filme\_inside\_monkey\_zetterland   & filme\_lost\_in\_translation   \\
        spike\_jonze   & filme\_torrance\_rises   & filme\_torrance\_rises   \\
        francis\_ford\_coppola   & filme\_hearts\_of\_darkness\_a\_filmmaker\_s\_apocalypse   & filme\_rumble\_fish   \\
        sam\_raimi   & filme\_spies\_like\_us   & filme\_crimewave   \\
        joel\_coen   & filme\_spies\_like\_us   & filme\_fargo   \\
        eric\_schaeffer   & filme\_if\_lucy\_fell   & filme\_if\_lucy\_fell   \\
        stephen\_hillenburg   & filme\_the\_spongebob\_squarepants\_movie   & filme\_the\_spongebob\_squarepants\_movie   \\
        robert\_redford   & filme\_the\_horse\_whisperer   & filme\_the\_horse\_whisperer   \\
        \hline
    \end{tabular}
\end{center}

\subsection*{Query 6}
Quais \underline{diretores} dirigiram algum \underline{filme} em um \underline{ano} entre os anos \textbf{N\textsubscript{1}} e \textbf{N\textsubscript{2}},  em que os atores \textbf{X} e \text{Y} aparecem, do mais antigo para o mais novo?\\

\noindent Para \textbf{N\textsubscript{1}} = \verb|1901|, \textbf{N\textsubscript{2}} = \verb|2000|, \textbf{X} = \verb|onto:a_j_cook| e \text{Y} = \verb|onto:allen_stewart_coates|:

\begin{verbatim}
SELECT DISTINCT ?Ano ?Diretor ?Filme
WHERE
{
  BIND (1901 AS ?N1)
  BIND (2000 AS ?N2)
  BIND (onto:a_j_cook AS ?X)
  BIND (onto:allen_stewart_coates AS ?Y)
  ?X rdf:type onto:Ator.
  ?Y rdf:type onto:Ator.
  ?Filme rdf:type onto:Filme.
  ?Diretor rdf:type onto:Diretor.
  ?Filme onto:temAnoDeLancamento ?Ano.
  FILTER (?Ano <= ?N2).
  FILTER (?Ano >= ?N1).
  ?X onto:atuaEm ?Filme.
  ?Y onto:atuaEm ?Filme.
  ?Filme onto:dirigidoPor ?Diretor
}
ORDER BY ?Ano
\end{verbatim}

\begin{center}
\begin{tabular}{|l|l|l|}
    \hline
    Ano	 & Diretor & Filme\\
    \hline
    1999 & sofia\_coppola & filme\_the\_virgin\_suicides\\
    \hline
\end{tabular}
\end{center}

\subsection*{Query 7}
Quais pares formados por uma uma \underline{atriz} e um \underline{ator} atuaram juntos em algum \underline{filme} de \underline{duração} entre \textbf{M1} e \textbf{M2}?\\

\noindent Para \textbf{M1} = \verb|149| e \textbf{M2} = \verb|157|:

\begin{verbatim}
SELECT ?Atriz ?Ator ?Filme ?Duracao
WHERE
{
  BIND (149 AS ?M1)
  BIND (157 AS ?M2)
  ?Atriz rdf:type onto:Mulher.
  ?Atriz rdf:type onto:Ator.
  ?Ator rdf:type onto:Homem.
  ?Ator rdf:type onto:Ator.
  ?Filme rdf:type onto:Filme.
  ?Atriz onto:atuaEm ?Filme.
  ?Ator onto:atuaEm ?Filme.
  ?Filme onto:temDuracao ?Duracao.
  FILTER (?Duracao >= ?M1).
  FILTER (?Duracao <= ?M2).
}
ORDER BY ?Duracao
\end{verbatim}

\begin{center}
    \centering
    \begin{tabular}{|l|l|l|l|}
        \hline
        Atriz & Ator & Filme & Duracao \\
        \hline
        audrey\_tautou & alfred\_molina & filme\_the\_da\_vinci\_code & 149 \\
        audrey\_tautou & ian\_mckellen & filme\_the\_da\_vinci\_code & 149 \\
        audrey\_tautou & jean\_reno & filme\_the\_da\_vinci\_code & 149 \\
        audrey\_tautou & jean\_yves\_berteloot & filme\_the\_da\_vinci\_code & 149 \\
        audrey\_tautou & jurgen\_prochnow & filme\_the\_da\_vinci\_code & 149 \\
        audrey\_tautou & paul\_bettany & filme\_the\_da\_vinci\_code & 149 \\
        audrey\_tautou & tom\_hanks & filme\_the\_da\_vinci\_code & 149 \\
        barbara\_garrick & afemo\_omilami & filme\_the\_firm & 154 \\
        debbie\_turner & afemo\_omilami & filme\_the\_firm & 154 \\
        deborah\_thomas & afemo\_omilami & filme\_the\_firm & 154 \\
        erin\_branham & afemo\_omilami & filme\_the\_firm & 154 \\
        holly\_hunter & afemo\_omilami & filme\_the\_firm & 154 \\
        janie\_paris & afemo\_omilami & filme\_the\_firm & 154 \\
        \vdots & \vdots & \vdots &  \vdots\\
        susan\_elliott & wilford\_brimley & filme\_the\_firm & 154 \\
        terri\_welles & wilford\_brimley & filme\_the\_firm & 154 \\
        barbara\_garrick & william\_r\_booth & filme\_the\_firm & 154 \\
        debbie\_turner & william\_r\_booth & filme\_the\_firm & 154 \\
        deborah\_thomas & william\_r\_booth & filme\_the\_firm & 154 \\
        erin\_branham & william\_r\_booth & filme\_the\_firm & 154 \\
        holly\_hunter & william\_r\_booth & filme\_the\_firm & 154 \\
        janie\_paris & william\_r\_booth & filme\_the\_firm & 154 \\
        jeane\_aufdenberg & william\_r\_booth & filme\_the\_firm & 154 \\
        jeanne\_tripplehorn & william\_r\_booth & filme\_the\_firm & 154 \\
        joey\_anderson & william\_r\_booth & filme\_the\_firm & 154 \\
        julia\_hayes & william\_r\_booth & filme\_the\_firm & 154 \\
        karina\_lombard & william\_r\_booth & filme\_the\_firm & 154 \\
        margo\_martindale & william\_r\_booth & filme\_the\_firm & 154 \\
        rebecca\_glenn & william\_r\_booth & filme\_the\_firm & 154 \\
        susan\_elliott & william\_r\_booth & filme\_the\_firm & 154 \\
        terri\_welles & william\_r\_booth & filme\_the\_firm & 154 \\
        \hline
    \end{tabular}
\end{center}

\subsection*{Query 8}
Qual o \underline{diretor} que mais dirigiu filmes em que aparece o ator de primeiro nome \textbf{X\textsubscript{p}} e último nome \textbf{X\textsubscript{u}}?\\

\noindent Para \textbf{X\textsubscript{p}} = \verb|"Vincent"|, \textbf{X\textsubscript{u}} = \verb|"Coppola"|:

\begin{verbatim}
SELECT ?Diretor
WHERE
{
  BIND ("Vincent" AS ?XP)
  BIND ("Coppola" AS ?XU)
  ?ator rdf:type onto:Ator.
  ?filme rdf:type onto:Filme.
  ?Diretor rdf:type onto:Diretor.
  ?ator onto:atuaEm ?filme.
  ?ator onto:temPrimeiroNome ?XP.
  ?ator onto:temSobrenome ?XU.
  ?Diretor onto:dirige ?filme.
}
GROUP BY ?Diretor
ORDER BY DESC(COUNT(?filme))
LIMIT 1
\end{verbatim}

\begin{center}
\begin{tabular}{|l|}
    \hline
    Diretor\\
    \hline
    francis\_ford\_coppola\\
    \hline
\end{tabular}
\end{center}

\subsection*{Query 9}
Qual o \underline{filme} mais antigo em que o ator \textbf{X} atuou, em que \underline{ano} foi lançado e qual era seu \underline{personagem}? Havendo empate, devolver todos.\\

\noindent Para \textbf{X} = \verb|onto:alan_rachins|:

\begin{verbatim}
SELECT ?Filme ?Ano ?Personagem
WHERE
{
  BIND (onto:alan_rachins AS ?X).
  ?X rdf:type onto:Ator.
  ?Filme rdf:type onto:Filme.
  ?X onto:atuaEm ?Filme.
  ?X onto:interpreta ?Personagem.
  ?Filme onto:temAnoDeLancamento ?anoD.
  FILTER (?anoD = ?Ano).
  {
  SELECT (MIN(?anoD) as ?Ano)
    WHERE
    {
      BIND (onto:alan_rachins AS ?X).
      ?X onto:atuaEm ?Filme.
      ?Filme onto:temAnoDeLancamento ?anoD.
    }
  }
}
\end{verbatim}

\begin{center}
\begin{tabular}{|l|l|l|}
    \hline
    Filme & Ano	& Personagem\\
    \hline
    filme\_north & 1994 & personagem\_defense\_attorney\\
    \hline
\end{tabular}
\end{center}

\subsection*{Query 10}
Qual o \underline{filme} mais longo dirigido por \textbf{D}, e qual a sua \underline{duração}? Havendo empate, devolver todos da mesma duração.\\

\noindent Para \textbf{D} = \verb|onto:ethan_coen|:

\begin{verbatim}
SELECT ?Filme ?Duracao
WHERE
{
  BIND (onto:ethan_coen AS ?D)
  ?D rdf:type onto:Diretor.
  ?Filme rdf:type onto:Filme.
  ?D onto:dirige ?Filme.
  ?Filme onto:temDuracao ?duracaoD.
  FILTER (?duracaoD = ?Duracao).
  {
  SELECT (MAX(?duracaoD) as ?Duracao)
    WHERE{
      BIND (onto:ethan_coen AS ?D)
      ?D onto:dirige ?Filme.
      ?Filme onto:temDuracao ?duracaoD.
    }
  }
}
\end{verbatim}

\begin{center}
\begin{tabular}{|l|l|}
    \hline
    Filme & Duracao\\
    \hline
    filme\_paris\_je\_t\_aime & 120\\
    \hline
\end{tabular}
\end{center}

\end{document}
